/*!
 * FPDF.js
 * https://github.com/platdesign/fpdf
 *
 * @author Christian Blaschke - @platdesign
 * @version 0.0.1
 */
!function(t,i){var e="FPDF",s=function(t){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null},n=function(t,i){var e,s;s="object"==typeof t?{}:[],t=t||{},i=i||{};for(e in t)s[e]="object"==typeof t[e]?n(t[e]):t[e];if(i)for(e in i)s[e]="object"==typeof i[e]?n(s[e],i[e]):i[e];return s},h=function(t,i){var e=n(i);return e.margin=[0,0,0,0],e.padding=[0,0,0,0],e.borderRadius=0,e.borderWidth=0,delete e.width,delete e.left,delete e.top,n(e,t)},r=function(t){return function(){return new t}},o=stdClass.extend({constructor:function(t){this.parent=t,this.stack=[]},append:function(t){this.stack.push(t)},prepend:function(t){this.stack.unshift(t)},_process:function(){for(var t in this.stack)this.stack[t]._process()},_render:function(){for(var t in this.stack)this.stack[t]._render()},setParent:function(t){for(var i in this.stack)this.stack[i].setParent(t)},height:function(){var t=0;for(var i in this.stack)t+=this.stack[i].outerHeight();return t},heighest:function(){var t=0;for(var i in this.stack){var e=this.stack[i].outerHeight();e>t&&(t=e)}return t}}),c=stdClass.extend({constructor:function(t){this.styles={},this.children=new o(this),t&&this.setParent(t)},setParent:function(t){this.parent=t,this.doc=this.parent.doc,this.children.setParent(this)},css:function(t){for(var i in t)this.styles[i]=t[i];return this},_process:function(){this.c={x:0,y:0},this._processStyles(),this.process(),this.children._process()},_processStyles:function(){this.styles=h(this.styles,this.parent.styles);var t=this.styles,i=function(i){var e;t[i]?(e=t[i],"number"==typeof e&&(t[i]=[e,e,e,e]),"object"==typeof e&&2===e.length&&(t[i]=[e[0],e[1],e[0],e[1]])):t[i]=[0,0,0,0];var s=["Top","Right","Bottom","Left"];for(var n in s)e=t[i+s[n]],t[i+s[n]]&&(t[i][n]=e),delete t[i+s[n]]};i("margin"),i("padding"),sanitizeColor=function(i){var e=t[i];"string"==typeof e&&(e=e.replace("#",""),3===e.length&&(e+=e)),t[i]=e},sanitizeColor("color"),sanitizeColor("background"),sanitizeColor("borderColor")},process:function(){},_render:function(){this.c={x:0,y:0};var t=this.doc._getStyles();this.doc._setStyles(this.styles),this.render(),this.children._render(),this.afterRender(),this.doc._setStyles(t)},render:function(){},afterRender:function(){void 0===this.styles.top&&(this.parent.c.y+=this.outerHeight())},append:function(t){return this.children.append(t),t.setParent(this),this},prepend:function(t){return this.children.prepend(t),t.setParent(this),this},appendTo:function(t){return t.append(this),this},prependTo:function(t){return t.prepend(this),this},_m:function(t){return this.styles.margin?this.styles.margin[t]||0:0},_p:function(t){return this.styles.padding?this.styles.padding[t]||0:0},width:function(){return this.styles.width?this.styles.width-this._m(1)-this._m(3):this.parent.innerWidth()-this._m(1)-this._m(3)},outerWidth:function(){return this.width()},innerWidth:function(){return this.width()-this._p(1)-this._p(3)},innerHeight:function(){return void 0!==this.styles.height?this.styles.height:this.children.height()},height:function(){return this.innerHeight()+this._p(0)+this._p(2)},outerHeight:function(){return this.height()+this._m(0)+this._m(2)},left:function(){return void 0!==this.styles.left?this.c.x+this.styles.left+this._m(3):this.c.x+this.parent.left()+this.parent._p(3)+this._m(3)},top:function(){return void 0!==this.styles.top?this.c.y+this.styles.top+this._m(0):this.c.y+this.parent.top()+this.parent._p(0)+this._m(0)}}),d=c.extend({constructor:function(t){this.styles={},this.c={x:0,y:0},this.children=new o(this),this.setParent(this),this.doc=t},initialize:function(){},initializeHeaderAndFooter:function(){this._header=FPDF.Div({top:0,left:0}).appendTo(this),this._footer=FPDF.Div({top:0,left:0}).appendTo(this),this._header.afterRender=this._footer.afterRender=function(){this.parent.c.y=0,this.parent.c.x=0},this.header.call(this._header),this.footer.call(this._footer)},width:function(){return this.doc.width()},innerWidth:function(){return this.width()-this._p(1)-this._p(3)},outerWidth:function(){return this.width()},left:function(){return this.c.x},top:function(){return this.c.y},afterRender:function(){},header:function(){},footer:function(){}}),a=c.extend({render:function(){var t;t=null!==this.doc.styles.background?this.styles.borderWidth>0?"FD":"F":this.styles.borderWidth>0?"S":null,(this.styles.borderWidth>0||null!==this.doc.styles.background)&&this.doc._doc.roundedRect(this.left(),this.top(),this.width(),this.height(),this.styles.borderRadius,this.styles.borderRadius,t)},text:function(t){return this._text?this._text.inner(t):this._text=FPDF.Text().appendTo(this).inner(t),this},process:function(){}}),l=c.extend({inner:function(t){return this.content=t,this},height:function(){{var t=this.styles;this.parent.styles}return this.content.length*this.lh()+t.padding[0]+t.padding[2]},process:function(){"function"==typeof this.content&&(this.content=this.content()),"string"==typeof this.content&&(this.content=this.doc._doc.splitTextToSize(this.content,this.width(),{fontSize:this.styles.fontSize,fontName:this.styles.fontFamily,fontStyle:this.styles.fontStyle}))},fh:function(){return.3527*this.styles.fontSize},lh:function(){return this.fh()*this.styles.lineHeight},render:function(){var t=this.left(),i=this.top()+this._p(0),e=this.innerWidth();for(var s in this.content)this.textLine(this.content[s],t,i,e),i+=this.lh();return this},textLine:function(t,i,e,s){var n=0;"right"===this.styles.textAlign&&(n=s-this.doc._doc.getStringUnitWidth(t)*this.fh()),"center"===this.styles.textAlign&&(n=s/2-this.doc._doc.getStringUnitWidth(t)*this.fh()/2),this.doc._doc.text(t,i+this._p(3)+n,e+this.lh()/2+3*this.fh()/8)}}),u=a.extend({constructor:function(){c.prototype.constructor.apply(this,arguments)},afterRender:function(){this.parent.c.y+=this.outerHeight()},innerHeight:function(){return void 0!==this.styles.height?this.styles.height:this.children.heighest()},_transFormElToFlexRow:function(t){t.width=f.prototype.width,t.afterRender=f.prototype.afterRender,t.styles.margin=0},append:function(t){return this._transFormElToFlexRow(t),c.prototype.append.call(this,t),this},prepend:function(t){return this._transFormElToFlexRow(t),c.prototype.prepend.call(this,t),this},_childWidthEvenly:function(){return this.innerWidth()/this.children.stack.length}}),f=a.extend({width:function(){var t=0,i=this.parent._childWidthEvenly(),e=this.parent.children.stack.length;t=void 0!==this.styles.width?this.styles.width:i;var s=0;for(var n in this.parent.children.stack){var h=this.parent.children.stack[n];s+=void 0!==h.styles.width?h.styles.width:i}var r=this.parent.innerWidth()-s;return t+r/e-this._m(1)-this._m(3)},afterRender:function(){this.parent.c.x+=this.outerWidth()}}),p=a.extend({render:function(){a.prototype.render.apply(this),this.doc._doc.addImage(this.dataURI,"PNG",this.left(),this.top(),this.width(),this.height())},text:function(){},src:function(t){var i=this.img=new Image;return i.src=t,this._imgToDataUri(),this},width:function(){return.264583333*this.img.width},height:function(){return.264583333*this.img.height},_imgToDataUri:function(){var t,i=this.img,e=this;i.onload=function(){// Create the canvas element.
var s=document.createElement("canvas");s.width=i.width,s.height=i.height,// Get '2d' context and draw the image.
t=s.getContext("2d"),t.drawImage(i,0,0),e.dataURI=s.toDataURL()}},process:function(){}}),g=stdClass.extend({constructor:function(t){t=t||{format:"a4",orientation:"portrait",unit:"mm"},this.c={x:0,y:0},this._doc=new i(t),this.styles={fontSize:12,lineHeight:1.2,fontFamily:"helvetica",color:"#000000",background:null,drawColor:"#000000",borderWidth:0,borderRadius:0,textAlign:"left",fontStyle:"normal",margin:[0,0,0,0],padding:[0,0,0,0]},this.pages=[],this.addPage(!0),this.initialize.apply(this,arguments)},initialize:function(){},Page:d,render:function(){var t;for(t in this.pages)this.pages[t]._process();for(t in this.pages)t>0&&this._doc.addPage(),this.pages[t]._render(this.c),this.c.x=0,this.c.y=0},page:function(t){return t?this.pages[t-1]?this.pages[t-1]:void 0:this._activePage},setX:function(t){this.c.x=0>t?this.width()+t:t},setY:function(t){this.c.y=0>t?this.height()+t:t},setXY:function(t,i){this.setX(t),this.setY(i)},width:function(){return this._doc.internal.pageSize.width},height:function(){return this._doc.internal.pageSize.height},_getStyles:function(){return{fontFamily:this.styles.fontFamily,fontSize:this.styles.fontSize,lineHeight:this.styles.lineHeight,color:this.styles.color,background:this.styles.background,borderWidth:this.styles.borderWidth,borderRadius:this.styles.borderRadius,drawColor:this.styles.drawColor,textAlign:this.styles.textAlign,fontStyle:this.styles.fontStyle}},_setStyles:function(t){t=t||{},t.fontFamily&&this._doc.setFont(t.fontFamily),t.fontSize&&this.setFontSize(t.fontSize),t.color&&this.setFontColor(t.color),this.setBackground(t.background),(t.borderColor||t.drawColor)&&this.setDrawColor(t.borderColor||t.drawColor),t.lineHeight&&this.setLineHeight(t.lineHeight),t.borderWidth&&this.setBorderWidth(t.borderWidth),t.borderRadius&&this.setBorderRadius(t.borderRadius),t.textAlign&&this.setTextAlign(t.textAlign),t.fontStyle&&this.setFontStyle(t.fontStyle)},setFontSize:function(t){return this.styles.fontSize=t,this._doc.setFontSize(t),this},setFontColor:function(t){this.styles.color=t;var i=s(t);this._doc.setTextColor.call(this._doc,i.r,i.g,i.b)},setBackground:function(t){if("string"==typeof t){this.styles.background=t;var i=s(t);this._doc.setFillColor.call(this._doc,i.r,i.g,i.b)}else null===t?(this.styles.background=null,this._doc.setFillColor.call(this._doc,0,0,0,100)):(this.styles.background=null,this._doc.setFillColor.call(this._doc,0,0,0,50))},setDrawColor:function(t){this.styles.drawColor=t;var i=s(t);this._doc.setDrawColor.call(this._doc,i.r,i.g,i.b)},setLineHeight:function(t){this.styles.lineHeight=t},setBorderWidth:function(t){this.styles.borderWidth=t,this._doc.setLineWidth(t)},setTextAlign:function(t){this.styles.textAlign=t},setFontStyle:function(t){this.styles.fontStyle=t,this._doc.setFontStyle(t)},setBorderRadius:function(t){this.styles.borderRadius=t},toDataUri:function(){return this.render(),this._doc.output("datauristring")},save:function(t){this.render(),this._doc.save(t)},addPage:function(){this._activePage=new this.Page(this),this.pages.push(this._activePage),this._activePage.css(this.styles),this._activePage.initialize(),this._activePage.initializeHeaderAndFooter(),this._activePage.index=this.pages.length}});t[e]={Doc:g,Div:r(a),Text:r(l),Flexbox:r(u),Img:r(p),Page:d}}(window,jsPDF);